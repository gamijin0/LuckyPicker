{% extends "common/base.html" %}

{% block body %}

    <div>
        <button class="btn  btn-success" data-toggle="modal" data-target="#addBot" style="font-family: 微软雅黑" >
            添加账号
        </button>
        <br><br>
    </div>


    {#用于展示机器人列表的table#}
    <table class="table table-bordered table-responsive">
        <thead>
            <th>账号</th>
            <th>密码</th>
            <th>状态</th>
            <th>cookies</th>
            <th>操作</th>
        </thead>
        <tbody>
            {% for b in botlist %}
                <tr>
                    <td>{{ b.username }}</td>
                    <td>{{ b.password }}</td>
                    <td>
                        {% if b.isValid == True %}
                            <span style="color: #4cae4c" class="glyphicon glyphicon-ok"></span>
                            {% else %}
                            <span style="color: #c7254e" class="glyphicon glyphicon-remove"></span>
                        {% endif %}
                    </td>
                    <td>{{ b.cookies }}</td>
                    <th>
                        <form method="post" action={% url 'delBot' %}>
                            {#防跨站#}
                            {% csrf_token %}
                            <input  type="hidden" name="username" value={{ b.username }}>
                            <button type="submit" class="btn btn-danger" onclick= "return confirm('是否确认删除？')">
                                <span class="glyphicon glyphicon-trash"></span>
                                删除
                            </button>
                        </form>
                    </th>
                </tr>
            {% endfor %}
        </tbody>
    </table>


    {#用于添加账号的模态框#}
    <div class="modal fade" id='addBot' tabindex="-1" role="dialog"
       aria-labelledby="myModalLabel" aria-hidden="true">
       <div class="modal-dialog">
          <div class="modal-content">
             <div class="modal-header">
                <button type="button" class="close"
                   data-dismiss="modal" aria-hidden="true">
                      &times;
                </button>
                <h4 class="modal-title" id="myModalLabel">
                   添加账号
                </h4>
             </div>
             <div class="modal-body">
                 {#表单#}
                <form action={% url 'addBot' %} method='post' role="form" class="form-horizontal">

                    {#防跨站#}
                    {% csrf_token %}

                    {#表单内容 #}
                    <div class="form-group">
                        <label class="control-label col-md-2">账号</label>
                        <div class="col-md-6">
                            <input  type="text" class="form-control" name="username"  >
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="control-label col-md-2">密码</label>
                        <div class="col-md-6">
                            <input  type="text" class="form-control" name="password">
                        </div>
                    </div>

                    {#    按钮    #}
                    <div class="col-md-offset-1">
                        <button type="submit" class="btn btn-danger">确认提交</button>
                    </div>


                </form>

             </div>
             <div class="modal-footer">
                <button type="button" class="btn btn-default"
                   data-dismiss="modal">关闭
                </button>
             </div>
          </div><!-- /.modal-content -->
    </div><!-- /.modal -->

    </div>

{% endblock %}